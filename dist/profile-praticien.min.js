"use strict";angular.module("cs-profile-praticien",["ngResource","picardy.fontawesome","uiGmapgoogle-maps"]).directive("profilePraticien",["$resource",function($resource){return{restrict:"E",scope:{id:"@",apiHost:"@"},replace:!0,template:'<div class="" ng-class="componentClasses" id="{{componentId}}">\n    <div class="row">\n        <div class="col-md-8 text-left">\n            <div class="row">\n                <div class="col-md-3 col-xs-2">\n                    <div class="thumbnail">\n                        <img ng-src="{{practitioner.profile_url}}" class="avatar"/>\n                    </div>\n                </div>\n                <div class="col-md-6 col-xs-10">\n                    <h1>{{practitioner.civility.lib_court}} {{practitioner.name_long}}</h1>\n                    <h2 class="job">{{practitioner.job.lib_long}}</h2>\n                </div>\n            </div>\n            <hr />\n        </div>\n        <div class="col-md-4 col-xs-12">\n            <ui-gmap-google-map center=\'map.center\' zoom=\'map.zoom\' dragging="false" options="map.options">\n                <ui-gmap-marker coords="map.center" idKey="1"></ui-gmap-marker>\n            </ui-gmap-google-map>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-sm-8 col-md-8">\n            <div class="block">\n                <h2><fa name="info"></fa> Présentation</h2>\n                <p>{{practitioner.prestataire.presentation}}</p>\n            </div>\n        </div>\n        <div class="col-sm-4 col-md-4">\n            <div>\n                <h2><fa name="map-marker"></fa> Adresse</h2>\n                <p>{{practitioner.address.address}}<br />{{practitioner.address.postal_code + \' \' + practitioner.address.city}}</p>\n            </div>\n\n            <div>\n                <h2><fa name="phone"></fa> Contact</h2>\n                <p>Téléphone : {{practitioner.prestataire.phone}}</p>\n                <p ng-hide="practitioner.prestataire.portable == \'\'">Mobile : {{practitioner.prestataire.portable}}</p>\n                <p>Site internet : <a href="{{practitioner.prestataire.website}}" target="_blank">{{practitioner.prestataire.website}}</a></p>\n            </div>\n\n            <div ng-hide="practitioner.syndicat_id === \'21\' || practitioner.syndicat_id === \'20\'">\n                <h2><fa name="users"></fa> Syndicat</h2>\n                <p>{{practitioner.nom_syndicat}}</p>\n                <p><img alt="{{practitioner.abbr_syndicat}}" height="100" width="100" ng-src=""></p>\n            </div>\n\n        </div>\n    </div>\n    <div class="block">\n        <div class="row" ng-show="practitioner.prestataire.type_prestataire_id == \'2\'">\n            <div class="col-sm-12 col-md-12">\n                <h2><fa name="building"></fa> Société / Structure</h2>\n                <p>Société : {{practitioner.societe}}<br/>\n                    SIRET : {{practitioner.prestataire.siret}}<br/>\n                    Numéro ADELI  : {{practitioner.adeli}}</p>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-sm-6 col-md-6" ng-show="practitioner.payment_types.length > 0">\n                <h2><fa name="credit-card"></fa> Moyens de paiement</h2>\n                <p>\n                <ul>\n                    <li ng-repeat="paymentType in practitioner.payment_types">{{paymentType.libelle}}</li>\n                </ul>\n                </p>\n            </div>\n\n            <div class="col-sm-6 col-md-6" ng-show="practitioner.practical_informations.length > 0">\n                <h2><fa name="info-circle"></fa> Informations pratiques</h2>\n                <p>\n                <ul>\n                    <li ng-repeat="practicalInfo in practitioner.practical_informations">{{practicalInfo.libelle}}</li>\n                </ul>\n            </div>\n        </div>\n\n        <div class="row">\n            <div class="col-sm-6 col-md-6" ng-show="practitioner.degrees.length > 0">\n                <h2><fa name="graduation-cap"></fa> Formations</h2>\n                <p>\n                <ul>\n                    <li ng-repeat="degree in practitioner.degrees">{{degree.annee}} - {{degree.libelle}}, {{degree.ecole}}</li>\n                </ul>\n                </p>\n            </div>\n            <div class="col-sm-6 col-md-6" ng-show="practitioner.experiences.length > 0">\n                <h2><fa name="stethoscope"></fa> Expériences</h2>\n                <p>\n                <ul>\n                    <li ng-repeat="xp in practitioner.experiences">\n                        <span ng-show="!xp.date_fin">Depuis {{xp.date_debut}}</span><span ng-show="xp.date_fin">De {{xp.date_debut}} à {{xp.date_fin}}</span> :\n                        <span ng-show="xp.type == \'1\'">Hôpital</span>\n                        <span ng-show="xp.type == \'2\'">Clinique</span>\n                        <span ng-show="xp.type == \'3\'">Cabinet</span>\n                        - {{xp.lieu}}<br />{{xp.description}}\n                    </li>\n                </ul>\n                </p>\n            </div>\n        </div>\n\n        <div class="row">\n            <div class="col-sm-6 col-md-6" ng-show="practitioner.languages.length > 0">\n                <h2><fa name="flag"></fa> Langues parlées</h2>\n                <p>\n                <ul>\n                    <li ng-repeat="language in practitioner.languages"><span class="flag-icon flag-icon-squared {{language.icone}}"></span> {{language.libelle_long}}</li>\n                </ul>\n                </p>\n            </div>\n\n            <div class="col-sm-6 col-md-6" ng-show="practitioner.associations.length > 0">\n                <h2><fa name="institution"></fa> Associations</h2>\n                <p>\n                <ul>\n                    <li ng-repeat="assoc in practitioner.associations">{{assoc.description}}</li>\n                </ul>\n                </p>\n            </div>\n        </div>\n        <div class="row">\n            <div class="col-sm-6 col-md-6" ng-show="practitioner.distinctions.length > 0">\n                <h2><fa name="trophy"></fa> Prix et Distinctions</h2>\n                <p>\n                <ul>\n                    <li ng-repeat="distinction in practitioner.distinctions">{{distinction.description}}</li>\n                </ul>\n                </p>\n            </div>\n\n            <div class="col-sm-6 col-md-6" ng-show="practitioner.publications.length > 0">\n                <h2><fa name="book"></fa> Travaux et publications</h2>\n                <p>\n                <ul>\n                    <li ng-repeat="publication in practitioner.publications">{{publication.description}}</li>\n                </ul>\n                </p>\n            </div>\n\n        </div>\n    </div>\n',link:function(scope,element,attrs){},controller:function($scope,$element,$attrs){$scope.componentClasses=$attrs["class"]?"praticien-fiche "+$attrs["class"]:"praticien-fiche",$scope.componentId=("practitioner-profile-"+$scope.id).trim();var host=$scope.apiHost;"/"===host.substr(-1)&&(host=host.substr(0,host.length-1));var User=$resource(host+"/rest/search/practitioner/:userId",{userId:"@id"});User.get({userId:$scope.id.trim()}).$promise.then(function(data){$scope.practitioner=data,$scope.map={center:{latitude:data.location.lat,longitude:data.location.lon},zoom:17,options:{streetViewControl:!1,zoomControl:!1,mapTypeControl:!1,draggable:!1}}})}}}]);